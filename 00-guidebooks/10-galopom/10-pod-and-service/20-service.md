# Service
К Pod-ам можно обратиться только по IP адресу.
Проблема в том, что этот IP адрес не является стабильным и он неизвестен заранее.
Pod может быть создан или уничтожен в любое время. Поэтому работа с ними существенно затрудняется.  
Для решения этой проблемы предназначен объект Service.

Service находит Pod-ы по меткам. Трафик направленный на Service попадет на один из Pod-ов, которые Service "присоединил" к себе.
Если таких Pod-ов более одного, тогда трафик будет попадать на эти Pod-ы по очереди.

К сервису (а точнее к Pod-ам через сервис) можно обращаться по имени сервиса.

## 
1. Service по заданным правилам находит поды и направляет трафик к поду. 
2. В сервисе указывается порт, на который будет отправлен трафик. 
3. Service может принять трафик с одного порта и отправить его на другой. 
  В спецификации pod-а можно указать порт, на который он принимает трафик. Это не является обязательным, но рекомендую это делать для наглядности. 


## Manifest
Пример описания Service
```yaml
apiVersion: v1
kind: Service
metadata:
  name: frontend
spec:
  ports:
    - name: web
      port: 80
  selector:
    app: frontend
  type: ClusterIP
```

## Обнаружение Pod-ов
Service, описанный выше, обнаружит Pod с таким описанием:

```yaml
apiVersion: v1
kind: Pod
metadata:
  labels:
    app: frontend
  name: frontend
spec:
  containers:
    - image: nginx:1.20
      imagePullPolicy: IfNotPresent
      name: nginx
```

Легко заметить что связывает эти два объекта:

Service
```yaml
  selector:
    app: frontend
```

Pod
```yaml
  labels:
    app: frontend
```

